<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	
	


	<link href='https://fonts.googleapis.com/css?family=PT+Sans+Caption:400,700' rel='stylesheet' type='text/css'>
	<link rel="alternate" type="application/rss+xml" title="Ben Dodson, iOS Developer" href="https://bendodson.com/rss.xml" />
	<link rel="stylesheet" href="/styles-2019-10-25.css" />
	<link rel="stylesheet" href="/highlight-2018-02-23.css" />
	<link rel="icon" href="https://bendodson.s3.amazonaws.com/bendodson.com/favicon.ico">
	<link rel="apple-touch-icon" href="https://bendodson.s3.amazonaws.com/bendodson.com/touch-icon-iphone.png">
	<link rel="apple-touch-icon" sizes="76x76" href="https://bendodson.s3.amazonaws.com/bendodson.com/touch-icon-ipad.png">
	<link rel="apple-touch-icon" sizes="120x120" href="https://bendodson.s3.amazonaws.com/bendodson.com/touch-icon-iphone-retina.png">
	<link rel="apple-touch-icon" sizes="152x152" href="https://bendodson.s3.amazonaws.com/bendodson.com/touch-icon-ipad-retina.png">
	<link rel="apple-touch-icon" sizes="180x180" href="https://bendodson.s3.amazonaws.com/bendodson.com/touch-icon-ipad-retina.png">
	<title>Ben Dodson's Blog &mdash; Freelance Swift and Apple Platforms Developer</title>
</head>
<body>

	<div id="wrapper">

		<header>
			<hgroup>
				<h1><a href="/">Ben Dodson</a></h1>
				<h2>Freelance iOS, macOS, Apple Watch, and Apple TV Developer</h2>
			</hgroup>
			<nav>
				<ul>
					<li><a href="/">Home</a></li><li><a href="/weblog/">Blog</a></li><li><a href="/about/">About</a></li><li><a href="/clients/">Portfolio</a></li><li><a href="/apps/">My Apps</a></li><li><a href="/projects/">Projects</a></li><li><a href="/contact/">Contact</a></li>
				</ul>
				<div class="divider"></div>
			</nav>
		</header>

		<section id="posts">

	
	<article>
		<header>
     		
				<h1><a href="/weblog/2015/10/06/hkhealthstore-extension-deletesamplesoftype/">HKHealthStore Extension, deleteSamplesOfType</a></h1>
			
			<time datetime="2015-10-06" pubdate=""><a href="/weblog/2015/10/06/hkhealthstore-extension-deletesamplesoftype/">October 06, 2015</a></time>
    	</header>
    	<div>
			<p>Following on from <a href="/weblog/2015/10/05/healthkit-radar-22977320/">my post yesterday</a> about the broken implementation of the <code>HKHealthStore</code> method <code>deleteObjectsOfType:predicate:withCompletion:</code>, I’ve put together <a href="https://gist.github.com/bendodson/c0f0a6a1f601dc4573ba">a gist</a> which provides a fixed method that works with <code>HKSampleType</code> objects; <code>deleteSamplesOfType:predicate:withCompletion:</code></p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span></span><span class="kd">import</span> <span class="nc">Foundation</span>
<span class="kd">import</span> <span class="nc">HealthKit</span>

<span class="kd">extension</span> <span class="bp">HKHealthStore</span> <span class="p">{</span>
    
    <span class="kd">func</span> <span class="nf">deleteSamplesOfType</span><span class="p">(</span><span class="n">sampleType</span><span class="p">:</span> <span class="bp">HKSampleType</span><span class="p">,</span> <span class="n">predicate</span><span class="p">:</span> <span class="bp">NSPredicate</span><span class="p">,</span> <span class="n">withCompletion</span> <span class="n">completion</span><span class="p">:</span> <span class="p">(</span><span class="n">success</span><span class="p">:</span> <span class="nb">Bool</span><span class="p">,</span> <span class="bp">count</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span> <span class="bp">NSError</span><span class="p">?)</span> <span class="p">-&gt;</span> <span class="nb">Void</span><span class="p">)</span> <span class="p">{</span>
        
        <span class="kd">let</span> <span class="nv">query</span> <span class="p">=</span> <span class="bp">HKSampleQuery</span><span class="p">(</span><span class="n">sampleType</span><span class="p">:</span> <span class="n">sampleType</span><span class="p">,</span> <span class="n">predicate</span><span class="p">:</span> <span class="n">predicate</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">sortDescriptors</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Void</span> <span class="k">in</span>
            
            <span class="k">if</span> <span class="kd">let</span> <span class="nv">_</span> <span class="p">=</span> <span class="n">error</span> <span class="p">{</span>
                <span class="n">completion</span><span class="p">(</span><span class="n">success</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="bp">count</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span> <span class="n">error</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="p">}</span>
            
            <span class="k">if</span> <span class="kd">let</span> <span class="nv">objects</span> <span class="p">=</span> <span class="n">results</span> <span class="p">{</span>
                <span class="k">if</span> <span class="n">objects</span><span class="p">.</span><span class="bp">count</span> <span class="p">==</span> <span class="mi">0</span> <span class="p">{</span>
                    <span class="n">completion</span><span class="p">(</span><span class="n">success</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="bp">count</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="kc">self</span><span class="p">.</span><span class="n">deleteObjects</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">withCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">success</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Void</span> <span class="k">in</span>
                        <span class="n">completion</span><span class="p">(</span><span class="n">success</span><span class="p">:</span> <span class="n">error</span> <span class="p">==</span> <span class="kc">nil</span><span class="p">,</span> <span class="bp">count</span><span class="p">:</span> <span class="n">objects</span><span class="p">.</span><span class="bp">count</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span> <span class="n">error</span><span class="p">)</span>
                    <span class="p">})</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">completion</span><span class="p">(</span><span class="n">success</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="bp">count</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
            <span class="p">}</span>

        <span class="p">}</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">executeQuery</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="p">}</span>
    
<span class="p">}</span></code></pre></figure>

<p>It simply uses the <code>NSPredicate</code> within a <code>HKSampleQuery</code> in order to find any objects that match the <code>HKSampleType</code> and then deletes them with the <code>HKHealthStore</code> method <code>deleteObjects:withCompletion:</code> - this correctly ensures that you are only deleting objects that match both the predicate and type.</p>

<p>By way of example, this simply extends <code>HKHealthStore</code> so you can do something like this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span></span><span class="kd">let</span> <span class="nv">date</span> <span class="p">=</span> <span class="bp">NSDate</span><span class="p">()</span>

<span class="kd">let</span> <span class="nv">predicate</span> <span class="p">=</span> <span class="bp">HKQuery</span><span class="p">.</span><span class="n">predicateForSamplesWithStartDate</span><span class="p">(</span><span class="n">date</span><span class="p">.</span><span class="n">beginningOfDay</span><span class="p">(),</span> <span class="n">endDate</span><span class="p">:</span> <span class="bp">NSDate</span><span class="p">().</span><span class="n">endOfDay</span><span class="p">(),</span> <span class="n">options</span><span class="p">:</span> <span class="p">.</span><span class="n">None</span><span class="p">)</span>

<span class="kd">let</span> <span class="nv">stepType</span> <span class="p">=</span> <span class="bp">HKQuantityType</span><span class="p">.</span><span class="n">quantityTypeForIdentifier</span><span class="p">(</span><span class="n">HKQuantityTypeIdentifierStepCount</span><span class="p">)</span><span class="o">!</span>
<span class="n">healthStore</span><span class="p">.</span><span class="n">deleteSamplesOfType</span><span class="p">(</span><span class="n">stepType</span><span class="p">,</span> <span class="n">predicate</span><span class="p">:</span> <span class="n">predicate</span><span class="p">,</span> <span class="n">withCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">success</span><span class="p">,</span> <span class="bp">count</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Void</span> <span class="k">in</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;deleted </span><span class="si">\(</span><span class="bp">count</span><span class="si">)</span><span class="s"> step objects: </span><span class="si">\(</span><span class="n">error</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nv">stepQuantity</span> <span class="p">=</span> <span class="bp">HKQuantity</span><span class="p">(</span><span class="n">unit</span><span class="p">:</span> <span class="bp">HKUnit</span><span class="p">.</span><span class="n">countUnit</span><span class="p">(),</span> <span class="n">doubleValue</span><span class="p">:</span> <span class="mi">9800</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nv">stepSample</span> <span class="p">=</span> <span class="bp">HKQuantitySample</span><span class="p">(</span><span class="n">type</span><span class="p">:</span> <span class="n">stepType</span><span class="p">,</span> <span class="n">quantity</span><span class="p">:</span> <span class="n">stepQuantity</span><span class="p">,</span> <span class="n">startDate</span><span class="p">:</span> <span class="n">date</span><span class="p">,</span> <span class="n">endDate</span><span class="p">:</span> <span class="n">date</span><span class="p">)</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">healthStore</span><span class="p">.</span><span class="n">saveObject</span><span class="p">(</span><span class="n">stepSample</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">success</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Void</span> <span class="k">in</span>
    <span class="p">}</span>
<span class="p">})</span>


<span class="kd">let</span> <span class="nv">flightsType</span> <span class="p">=</span> <span class="bp">HKQuantityType</span><span class="p">.</span><span class="n">quantityTypeForIdentifier</span><span class="p">(</span><span class="n">HKQuantityTypeIdentifierFlightsClimbed</span><span class="p">)</span><span class="o">!</span>
<span class="n">healthStore</span><span class="p">.</span><span class="n">deleteSamplesOfType</span><span class="p">(</span><span class="n">flightsType</span><span class="p">,</span> <span class="n">predicate</span><span class="p">:</span> <span class="n">predicate</span><span class="p">,</span> <span class="n">withCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">success</span><span class="p">,</span> <span class="bp">count</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Void</span> <span class="k">in</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;deleted </span><span class="si">\(</span><span class="bp">count</span><span class="si">)</span><span class="s"> flight objects: </span><span class="si">\(</span><span class="n">error</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nv">flightsQuantity</span> <span class="p">=</span> <span class="bp">HKQuantity</span><span class="p">(</span><span class="n">unit</span><span class="p">:</span> <span class="bp">HKUnit</span><span class="p">.</span><span class="n">countUnit</span><span class="p">(),</span> <span class="n">doubleValue</span><span class="p">:</span> <span class="mi">15</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nv">flightsSample</span> <span class="p">=</span> <span class="bp">HKQuantitySample</span><span class="p">(</span><span class="n">type</span><span class="p">:</span> <span class="n">flightsType</span><span class="p">,</span> <span class="n">quantity</span><span class="p">:</span> <span class="n">flightsQuantity</span><span class="p">,</span> <span class="n">startDate</span><span class="p">:</span> <span class="n">date</span><span class="p">,</span> <span class="n">endDate</span><span class="p">:</span> <span class="n">date</span><span class="p">)</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">healthStore</span><span class="p">.</span><span class="n">saveObject</span><span class="p">(</span><span class="n">flightsSample</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">success</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Void</span> <span class="k">in</span>
    <span class="p">}</span>
<span class="p">})</span></code></pre></figure>

<p>As a reminder, you can file a duplicate of (<a href="https://openradar.appspot.com/radar?id=5021999797633024">rdar://22977320</a>) if you’d like to see the original bug fixed but in the meantime the above should allow you to carry on with your HealthKit app without worrying about deleting other data.</p>

		</div>
	</article>
    
	<article>
		<header>
     		
				<h1><a href="/weblog/2015/10/05/healthkit-radar-22977320/">HealthKit Radar 22977320</a></h1>
			
			<time datetime="2015-10-05" pubdate=""><a href="/weblog/2015/10/05/healthkit-radar-22977320/">October 05, 2015</a></time>
    	</header>
    	<div>
			<p>Working with any code, it is inevitable that you’ll stumble across bugs. When this happens with iOS development, Apple ask developers to submit a “radar” so that they can track and hopefully fix any issues that arise. The issue is that the <a href="http://bugreport.apple.com/">Apple Bug Reporter</a> is locked down and non-searchable so you have no idea if anyone else has submitted the same issue. Apple supposedly collate all of the bugs and mark any issues as duplicates and then use the number submitted to gauge how important an issue is and prioritise it’s fix. This has led to sites like <a href="https://openradar.appspot.com/">Open Radar</a> that let developers copy and paste their bug reports so other developers can search and then simply submit new bugs as a duplicate.</p>

<p>In any case, today I found an interesting bug in HealthKit. iOS 9 added a new method named <code>deleteObjectsOfType:predicate:withCompletion</code> which is supposed to let you delete any objects you have written to HealthKit nice and easily. For example, I might have an app which constantly checks your step count and flights climbed throughout the day and so it will want to delete any steps and flights from 00.00 to 23.59 before it adds the updated count. Unfortunately, the method doesn’t seem to respect the <code>type</code> parameter and so it will delete everything that matches your query regardless of what <code>HKObjectType</code> it is.</p>

<p>For example, consider the following code:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span></span><span class="kd">let</span> <span class="nv">date</span> <span class="p">=</span> <span class="bp">NSDate</span><span class="p">()</span>

<span class="kd">let</span> <span class="nv">predicate</span> <span class="p">=</span> <span class="bp">HKQuery</span><span class="p">.</span><span class="n">predicateForSamplesWithStartDate</span><span class="p">(</span><span class="n">date</span><span class="p">.</span><span class="n">beginningOfDay</span><span class="p">(),</span> <span class="n">endDate</span><span class="p">:</span> <span class="bp">NSDate</span><span class="p">().</span><span class="n">endOfDay</span><span class="p">(),</span> <span class="n">options</span><span class="p">:</span> <span class="p">.</span><span class="n">None</span><span class="p">)</span>

<span class="kd">let</span> <span class="nv">stepType</span> <span class="p">=</span> <span class="bp">HKQuantityType</span><span class="p">.</span><span class="n">quantityTypeForIdentifier</span><span class="p">(</span><span class="n">HKQuantityTypeIdentifierStepCount</span><span class="p">)</span><span class="o">!</span>
<span class="n">healthStore</span><span class="p">.</span><span class="n">deleteObjectsOfType</span><span class="p">(</span><span class="n">stepType</span><span class="p">,</span> <span class="n">predicate</span><span class="p">:</span> <span class="n">predicate</span><span class="p">,</span> <span class="n">withCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">success</span><span class="p">,</span> <span class="bp">count</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Void</span> <span class="k">in</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;deleted </span><span class="si">\(</span><span class="bp">count</span><span class="si">)</span><span class="s"> step objects: </span><span class="si">\(</span><span class="n">error</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="p">})</span>
<span class="kd">let</span> <span class="nv">stepQuantity</span> <span class="p">=</span> <span class="bp">HKQuantity</span><span class="p">(</span><span class="n">unit</span><span class="p">:</span> <span class="bp">HKUnit</span><span class="p">.</span><span class="n">countUnit</span><span class="p">(),</span> <span class="n">doubleValue</span><span class="p">:</span> <span class="mi">9800</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">stepSample</span> <span class="p">=</span> <span class="bp">HKQuantitySample</span><span class="p">(</span><span class="n">type</span><span class="p">:</span> <span class="n">stepType</span><span class="p">,</span> <span class="n">quantity</span><span class="p">:</span> <span class="n">stepQuantity</span><span class="p">,</span> <span class="n">startDate</span><span class="p">:</span> <span class="n">date</span><span class="p">,</span> <span class="n">endDate</span><span class="p">:</span> <span class="n">date</span><span class="p">)</span>
<span class="n">healthStore</span><span class="p">.</span><span class="n">saveObject</span><span class="p">(</span><span class="n">stepSample</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">success</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Void</span> <span class="k">in</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nv">flightsType</span> <span class="p">=</span> <span class="bp">HKQuantityType</span><span class="p">.</span><span class="n">quantityTypeForIdentifier</span><span class="p">(</span><span class="n">HKQuantityTypeIdentifierFlightsClimbed</span><span class="p">)</span><span class="o">!</span>
<span class="n">healthStore</span><span class="p">.</span><span class="n">deleteObjectsOfType</span><span class="p">(</span><span class="n">flightsType</span><span class="p">,</span> <span class="n">predicate</span><span class="p">:</span> <span class="n">predicate</span><span class="p">,</span> <span class="n">withCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">success</span><span class="p">,</span> <span class="bp">count</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Void</span> <span class="k">in</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;deleted </span><span class="si">\(</span><span class="bp">count</span><span class="si">)</span><span class="s"> flight objects: </span><span class="si">\(</span><span class="n">error</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="p">})</span>
<span class="kd">let</span> <span class="nv">flightsQuantity</span> <span class="p">=</span> <span class="bp">HKQuantity</span><span class="p">(</span><span class="n">unit</span><span class="p">:</span> <span class="bp">HKUnit</span><span class="p">.</span><span class="n">countUnit</span><span class="p">(),</span> <span class="n">doubleValue</span><span class="p">:</span> <span class="mi">15</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">flightsSample</span> <span class="p">=</span> <span class="bp">HKQuantitySample</span><span class="p">(</span><span class="n">type</span><span class="p">:</span> <span class="n">flightsType</span><span class="p">,</span> <span class="n">quantity</span><span class="p">:</span> <span class="n">flightsQuantity</span><span class="p">,</span> <span class="n">startDate</span><span class="p">:</span> <span class="n">date</span><span class="p">,</span> <span class="n">endDate</span><span class="p">:</span> <span class="n">date</span><span class="p">)</span>
<span class="n">healthStore</span><span class="p">.</span><span class="n">saveObject</span><span class="p">(</span><span class="n">flightsSample</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">success</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Void</span> <span class="k">in</span>
<span class="p">}</span></code></pre></figure>

<p>The expected result is that you’ll end up with an entry for Step Count (9800 steps) and an entry for Flights Climbed (15). However, you’ll only get the Flights Climbed entry as the line <code>healthStore.deleteObjectsOfType(flightsType, predicate: predicate, withCompletion:...</code> will delete all entries that match the predicate, regardless of the <code>HKObjectType</code>. In addition, if you look at the headers for this method within the HealthKit framework, they don’t add up with what is expected:</p>

<p><img src="https://bendodson.s3.amazonaws.com/weblog/2015/radar-22977320.png" width="800" /></p>

<p>This suggests that this method was refactored at some point prior to release and has this rather serious bug. I’ve filed this as a radar (<a href="https://openradar.appspot.com/radar?id=5021999797633024">rdar://22977320</a>) but in the mean time you’ll need to do a manual search for objects with <code>HKSampleQuery</code> and delete them with a separate call if you want to avoid this.</p>

<p><strong>Update:</strong> I’ve put together a fix for this issue with a new <code>HKHealthStore</code> method, <a href="/weblog/2015/10/06/hkhealthstore-extension-deletesamplesoftype/"><code>deleteSamplesOfType:predicate:withCompletion:</code></a></p>

<p><strong>Update:</strong> Whilst iOS 9.1 hasn’t fixed this issue, my bug report has today (23rd Oct 2015) been marked as a duplicate of issue 23097982 so looks like they may be getting around to fixing it. iOS 9.2 perhaps?</p>

		</div>
	</article>
    
	<article>
		<header>
     		
				<h1><a href="/weblog/2015/09/25/the-times-they-are-a-changin/">The Times They Are A-Changin'</a></h1>
			
			<time datetime="2015-09-25" pubdate=""><a href="/weblog/2015/09/25/the-times-they-are-a-changin/">September 25, 2015</a></time>
    	</header>
    	<div>
			<p>Over three and a half years ago I <a href="/weblog/2012/02/16/ive-been-looking-forward-to-this-day-for-a-long-time/">announced the launch of WallaBee</a>, “the ultimate collectibles game for iOS”. Whilst it has been a labour of love for me for over the past four years, it has also been incredibly stressful and draining at times. Today I was very happy to announce that I’d <a href="http://wallabeegame.com/blog/sep-2015/wallazee">sold WallaBee to Munzee</a>. I won’t go into the details of how that will work for players (you can find out all about it on the <a href="http://wallabeegame.com/blog/">WallaBee Blog</a>) but I did want to talk a bit about how a relatively simple game became a huge business.</p>

<p>I created WallaBee as it was a game I wanted to play<sup id="fnref:wanttoplay"><a href="#fn:wanttoplay" class="footnote">1</a></sup>. I’d built several iOS apps in the past (including several that were featured by Apple) and my day job previously had been as a PHP developer so it was fairly trivial for me to throw the basic building blocks together. Over a few months of testing and iteration the game went live; it was free but monetised by using In-App Purchases for in game currency as well as a pro subscription for $5 a month which gave additional benefits to players. The feedback was great and I iterated quickly to a v1.1 product which launched at Nonick 012 where WallaBee was voted the ‘Best European Gaming Startup of 2012’. Over the coming years I’d add extra bits of complexity and hidden secrets<sup id="fnref:skip"><a href="#fn:skip" class="footnote">2</a></sup> and generally expand things out.</p>

<p>However, my big plan was to launch a version 2 product. I’d always considered v1.* to be a proof of concept and I had a ton of ideas for things I wanted to improve on. I pitched the idea to my co-founders in November 2012 and we showed off some screens and concepts to our players on April 1st 2013<sup id="fnref:aprilfool"><a href="#fn:aprilfool" class="footnote">3</a></sup>. It was around that time that the number of players was expanding rapidly and so I spent most of my time dealing with server issues and scalability. Over time, the fast iteration I’d started with slowed to a halt as I dealt with server scaling and that lead to issues when the innovation of iOS overtook us; for example, we didn’t implement AutoLayout and so weren’t equipped to deal with things like the iPhone 6 resolution change. This eventually led to nearly every issue needing the same solution; a complete rewrite of both the app and API. Unfortunately this was difficult to manage as all of my time as the sole developer was being taken up either trying to hold the server issues together enough for another release or dealing with player issues that crop up when you have thousands of people able to communicate with each other.</p>

<p>After a while, it just wasn’t fun for me anymore so I made the decision that I would <a href="http://wallabeegame.com/blog/aug-2015/the-end">shut it down</a>. A few minutes after that announcement, Rob Vardeman from Munzee got in touch and asked if we could speak. I’d met him before when he was in London for a Munzee event and after a discussion, some emails, and a lot of thinking, I decided to let Munzee acquire the company so that they could continue to grow it in the way I had wanted to. I am confident that they will do an excellent job at maintaining the quirky side of WallaBee<sup id="fnref:cats"><a href="#fn:cats" class="footnote">4</a></sup> whilst also being able to add some amazing new features; I’m so sure of it that I have remained as a shareholder of the company.</p>

<p>Based on my experiences, I have a few pieces of wisdom to share:</p>

<ul>
  <li>
    <p>It’s fine to get something launched but don’t forget to put in the groundwork for scalability. If you don’t know what you’re doing, find someone who does.</p>
  </li>
  <li>
    <p>Monetise your game from the start. We never had any issues but I see startups every day that get a big of investment and think that if they build it they can monetise it later; don’t do that. We launched with 30-day and 90-day subscriptions and most players bought a 90-day one straight off. It is much easier to alter your existing payment structure (as we did when we went from subscriptions to single payments for goods) than to try and add one when everything was free previously.</p>
  </li>
  <li>
    <p>Never announce something before it is built. This is a lesson that few people have mastered as it is insanely difficult trying to keep something awesome from the people who are going to love it most; it is also easy to announce something as then you feel like it forces you to launch it by that date but it doesn’t work. Take a leaf out of Apple’s book and only announce something when it is done and going to ship within the next 2 weeks (and when it comes to software, announcing something that is available “Today” should be the rule).</p>
  </li>
  <li>
    <p>Do not underestimate how difficult it is to manage a community of players or how crucial it is that you do. I frequently had to deal with issues such as bullying, stalking, and just generally petty squabbles. We had births, deaths, celebrations, and everything in between<sup id="fnref:death"><a href="#fn:death" class="footnote">5</a></sup>. There was also the inevitable bugs and server issues that required an apology. However, because of the way we handled those issues publicly and fairly, it cut us a lot of slack when things went wrong. A good community is the key thing for any social app and must be nurtured.</p>
  </li>
</ul>

<p>So what now? Without WallaBee to manage over the past few weeks, I’ve found myself at a bit of a loose end with so much more free time! I’ve written three apps so far including a content blocker, an app based on HealthKit, and an app to let me fly my Bebop Drone with an iOS MFI controller<sup id="fnref:stevethree"><a href="#fn:stevethree" class="footnote">6</a></sup>; all of them will be available on the App Store at some point. I’m also collaborating on an Apple TV game with another developer which will hopefully be live in November. Beyond that I haven’t decided what the future has in store but I’m enjoying working on small, offline apps for the time being.</p>

<p>The final thing to mention is a slight change to the way I do my freelance work. Due to WallaBee becoming my main business for a while, I changed my company name from Ben Dodson Apps Ltd to WallaBee Ltd. As Munzee are based in the US, they have no need for a UK Limited company and so they have simply purchased the rights and assets of the WallaBee app and brand. I’ve therefore changed the company name to Dodo Apps Ltd<sup id="fnref:dodo"><a href="#fn:dodo" class="footnote">7</a></sup> and that is what I’ll be using for all of my freelance business from now on.</p>

<div class="footnotes">
  <ol>
    <li id="fn:wanttoplay">
      <p>And the nice thing now is that I get to play it and enjoy it! <a href="#fnref:wanttoplay" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:skip">
      <p>One of our players, ‘SkipOkane’ put together <a href="http://skipslists.wikidot.com/stuff-to-try">a list of some of the secrets</a>. My favourite is probably the ‘Mirage’ item which would always appear as a #1 when you purchased it (although the ‘Boomerang’ item that comes back if you try and recycle it is a close second as is the jousting minigame…) <a href="#fnref:skip" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:aprilfool">
      <p>My reasoning was that if they hated it, we could pretend it was a joke. <a href="#fnref:aprilfool" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:cats">
      <p>They’ve done well so far; the first set they created is made entirely of dancing cats. I think it’s in safe hands! <a href="#fnref:cats" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:death">
      <p>I would never have believed that somebody would want to speak with me in the final weeks leading up to their death as they wanted to make arrangements for how their game items could be distributed. It’s humbling and hard to deal with. <a href="#fnref:death" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:stevethree">
      <p>I would love to do a Steve Jobs “<a href="https://www.youtube.com/watch?v=vZYlhShD2oQ&amp;t=2m19s">these are not 3 separate devices</a>” but they are. <a href="#fnref:stevethree" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:dodo">
      <p>I first used the name “Dodo Apps” when I was doing my A-Level IT course. I built a choral robe management system in Microsoft Access and had to choose a name for the about page; I chose “Dodo Apps” as I was a big fan of the dodo from Alice in Wonderland and because it used letters from my surname. <a href="#fnref:dodo" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
  </ol>
</div>

		</div>
	</article>
    
	<article>
		<header>
     		
				<h1><a href="/weblog/2015/09/25/brapp-the-rap-app/">Brapp, the rap app</a></h1>
			
			<time datetime="2015-09-25" pubdate=""><a href="/weblog/2015/09/25/brapp-the-rap-app/">September 25, 2015</a></time>
    	</header>
    	<div>
			<p>I’m happy to announce that an iPhone app I’ve been working on since March this year has gone live in the App Store; <a href="https://itunes.apple.com/gb/app/brapp-rap-sing-or-dance-to/id1022327727?mt=8">Brapp</a>.</p>

<p><img src="https://bendodson.s3.amazonaws.com/weblog/2015/brapp.jpg" width="800" /></p>

<p>Brapp is a free and easy way to create and discover exciting musical collaborations all over the world. Producers can share their beats allowing anyone to make mini music videos right on their phone. When you choose a beat and hit record, the camera starts rolling and the custom studio technology balances your audio (be it singing, rapping, or playing an instrument) onto the beat ready for you to add video filters and share with the world.</p>

<p>I was the sole iOS developer on the project and worked closely with the app creator<sup id="fnref:greatguys"><a href="#fn:greatguys" class="footnote">1</a></sup> and his API developer to bring it all to life. I was able to write the app in Swift and use AutoLayout to make sure everything scales beautifully on all 4 sizes of iPhone from the 3.5” iPhone 4S upto the 5.5” iPhone 6S Plus. In addition, I made use of GPUImage for the custom video filters and a whole load of low-level audio APIs to get the audio balance just right as well as real time waveforms and switching between external microphones. The design went through a number of iterations, each better than the last, and I was able to use my extensive UX knowledge to help shape the end result.</p>

<p>This was a great project to work on with a load of interesting technologies plus I got to lay down some sick beats<sup id="fnref:sickbeats"><a href="#fn:sickbeats" class="footnote">2</a></sup>. You can check out <a href="https://itunes.apple.com/gb/app/brapp-rap-sing-or-dance-to/id1022327727?mt=8">Brapp on the App Store</a> (it’s free) or <a href="http://www.brapp.tv">learn more on the official website</a>.</p>

<div class="footnotes">
  <ol>
    <li id="fn:greatguys">
      <p>These were great guys to work with. During a Slack conversation, they made the mistake of saying “Yes @bendodson, that is right” to which I said “I want that on a t-shirt”. A couple weeks later, <a href="https://bendodson.s3.amazonaws.com/weblog/2015/thatisright.jpg">this</a> arrived in the post… <a href="#fnref:greatguys" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:sickbeats">
      <p>Thankfully all now removed. <a href="#fnref:sickbeats" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
  </ol>
</div>

		</div>
	</article>
    
	<article>
		<header>
     		
				<h1><a href="/weblog/2015/09/23/appindex-interview/">AppIndex Interview</a></h1>
			
			<time datetime="2015-09-23" pubdate=""><a href="/weblog/2015/09/23/appindex-interview/">September 23, 2015</a></time>
    	</header>
    	<div>
			<p>Earlier this month I was interviewed by <a href="http://appindex.com/">AppIndex</a> about my work as a freelance app developer. You can <a href="http://appindex.com/blog/ben-dodson-ios-dev-talks-app-development/">read the full article on their website</a> but I’ve also put their questions and my answers below:</p>

<h3 id="how-long-have-you-been-involved-in-developing-apps-for">How long have you been involved in developing apps for?</h3>

<blockquote>
  <p>I started developing apps professionally in August 2009, shortly after iOS 3.0 was released, but I tinkered around with the iOS SDK when it was first announced the year before.</p>
</blockquote>

<h3 id="what-types-of-apps-do-you-work-on">What types of apps do you work on?</h3>

<blockquote>
  <p>I have quite a varied portfolio but for a long time the apps I worked on were location based (i.e. travel guides, restaurant finders, interesting places nearby, etc). Nowadays I tend to work on a lot of social network type apps but that’s probably more indicative of what clients are looking for at the moment.</p>
</blockquote>

<h3 id="what-platforms-tools-and-languages-do-you-work-with">What platforms, tools and languages do you work with?</h3>

<blockquote>
  <p>On the mobile side I only deal with iOS and all my new projects are written in Xcode using Swift 2.0 (with only a couple of legacy apps written in Objective-C). However, I also do backend development for APIs which I write exclusively in PHP. All my work is done on OS X.</p>
</blockquote>

<h3 id="what-apps-have-you-worked-on-that-you-are-most-proud-of">What apps have you worked on that you are most proud of?</h3>

<blockquote>
  <p>I think the app I was most proud of with was the “Horse Tracker” for the Grand National horse race. I worked with a company that attached trackers to the horses so we could see in realtime where they were on the field and display that to the user. It was really nice to use, especially on the iPad which had a full map view of the racecourse (which was never released in the end) and used lots of really cool technology such as audio indexing to perfectly match the time of the race on your TV screen to the data coming from the trackers, even if you were watching on a delayed stream or via a catch-up service hours later. Of course, nothing makes me more proud than the apps I write and publish myself so they will always beat client projects but that one was special.</p>
</blockquote>

<h3 id="what-are-the-big-trends-you-see-in-app-development-right-now">What are the big trends you see in app development right now?</h3>
<blockquote>
  <p>I’m starting to see a lot more thoughtful design coming through at the moment. Previously everybody was still trying to work out how to get data onto a small screen and most designers I worked with via clients had experience in print or web which didn’t always translate across; nowadays the level of design work seems to be much improved and everybody wants a slicker experience with more animation. The transition to the iOS 7 style of design (flat and minimal) seems to have helped as well.</p>
</blockquote>

<h3 id="what-is-the-best-thing-about-working-in-apps-and-mobile">What is the best thing about working in apps and mobile?</h3>
<blockquote>
  <p>I really enjoy the varied work. It can be difficult sometimes with deadlines and quite a big responsibility if your app is in millions of peoples hands but there is a huge amount of variety. I never really know what I’m going to be working on next which I find exciting.</p>
</blockquote>

<h3 id="what-is-the-one-thing-youd-like-to-change-about-app-development">What is the one thing you’d like to change about app development?</h3>
<blockquote>
  <p>I have two big gripes which are more to do with people than app development itself; being told I should port my apps to Android (“you’d make so much more money”) and being pitched an idea which isn’t so much an app as a service that requires servers, infrastructure, and has large operating costs (“I want an app that can let people upload photos and videos – I’ll give you 25% of the profit if you build it for free”).</p>
</blockquote>

<h3 id="what-mobile-devices-do-you-use">What mobile devices do you use?</h3>
<blockquote>
  <p>I use an iPhone 6 Plus and an iPad Air at the moment. I’m particularly interested in the rumoured 12” iPad Pro although I have something similar in the form of the 12” Macbook which I take to client meetings.</p>
</blockquote>

<h3 id="what-are-your-favourite-apps--games">What are your favourite apps / games?</h3>
<blockquote>
  <p>Ironically I don’t actually use that many apps beyond the stock things like mail. I’d say my most used 3rd party apps are Dark Sky for their weather alerts and Philips Hue for turning the lights on and off in my house. With games, I tend to play something solidly for a week and then get bored of it; I’m currently playing Alto’s Adventure, Rollercoaster Tycoon 3, and Kindo.</p>
</blockquote>

<h3 id="what-do-you-think-of-the-apple-watch">What do you think of the Apple Watch?</h3>
<blockquote>
  <p>I love my Apple Watch. It’s definitely a luxury rather than a necessity but I love getting notifications on my wrist, the fitness features, and Apple Pay. I’m looking forward to watchOS 2 especially as then I’ll be able to log a swim and have it count towards my exercise totals. It’ll be interesting to see how much better the 3rd party app experience is when the update arrives – I’ve dabbled with developing a few apps but the lag talking to the iPhone always limited the amount I could do.</p>
</blockquote>

		</div>
	</article>
    
	<article>
		<header>
     		
				<h1><a href="/weblog/2015/08/19/microsoft-bridge-and-the-app-gap/">Microsoft Bridge and the "App Gap"</a></h1>
			
			<time datetime="2015-08-19" pubdate=""><a href="/weblog/2015/08/19/microsoft-bridge-and-the-app-gap/">August 19, 2015</a></time>
    	</header>
    	<div>
			<p>I was recently asked my opinion on <a href="https://github.com/Microsoft/WinObjC/">Windows Bridge</a> and the “App Gap” between iOS, Android, and Windows Phone by <a href="http://www.fiercedeveloper.com/story/will-windows-bridge-be-enough-get-ios-developers-cross-over-microsoft-terri/2015-08-18">FierceDeveloper</a>. You can read <a href="http://www.fiercedeveloper.com/story/will-windows-bridge-be-enough-get-ios-developers-cross-over-microsoft-terri/2015-08-18">the article on their website</a> but I’ve also put the full questions that were put to me along with my answers below:</p>

<h3 id="would-something-like-windows-bridge-make-you-any-more-likely-to-bring-your-apps-to-windows-phone-why-or-why-not">Would something like Windows Bridge make you any more likely to bring your apps to Windows Phone? Why or why not?</h3>

<blockquote>
  <p>It wouldn’t convince me as there are two big problems: firstly, it only works with Objective-C whilst I have already made the switch over to Swift so I wouldn’t be able to make use of this (and the benefits of Swift massively outnumber the benefits of being on Windows Phone for me); secondly, whilst it may be easy to port an Objective-C app over, I would still need to build a custom Windows UI which would take a long time. In addition, this custom UI would need to be supported as and when new devices and screen sizes come out and I’d need to maintain feature parity between iOS and Windows making every release take significantly longer to bring to market.</p>
</blockquote>

<h3 id="what-do-you-think-are-the-biggest-reasons-for-the-app-gap-between-apples-app-store-and-whats-available-in-microsofts-app-store">What do you think are the biggest reasons for the “app gap” between Apple’s App Store and what’s available in Microsoft’s app store?</h3>

<blockquote>
  <p>There are lots of reasons for this but I think the two bigs ones are developer usage and money. When the iPhone came out, it was revolutionary and most developers who work in mobile began due to using an iPhone and wanting to write apps on it (that is certainly true in my case). That meant the iPhone got a lot of exciting apps developed on it first as the people that made those apps used iPhones. Over time, this has compounded into giving an Apple a massive advantage and whilst Android has caught up in many regards they haven’t got anywhere close when it comes to money. Simply put, iOS users spend more than Android users. I don’t know if that is due to the security and convenience of iTunes and TouchID or whether it is a more social thing (you’ve spent $700 on a phone so what is $100 a year on apps) but in all of the research I’ve done it has been the case that iOS users are willing to pay where Android users are not. It is for that reason I don’t port any of my apps to Android. Back to Microsoft though, the reason there is an app gap is that all of the developers started on iOS (and now Android) leading to a shortage of apps - this led to less customers and thus less money so they are now in the situation where it is very hard to attract developers as there are neither usage numbers nor financial figures to entice us.</p>
</blockquote>

<h3 id="is-there-more-microsoft-couldshould-do-to-make-developers-more-interested-in-creating-apps-and-games-for-their-platform">Is there more Microsoft could/should do to make developers more interested in creating apps and games for their platform?</h3>

<blockquote>
  <p>To be honest, I don’t think there is much Microsoft can do at this point. Consumers are simply not buying Windows Phones and that is the real problem. Whilst their initiatives such as building one app that can run on Windows 10, Xbox One, and Windows Phone are interesting, there simply isn’t enough consumer interest nor money to get iOS and Android developers to create apps on those platforms. Ultimately, Microsoft would probably be better chasing the gaming market over the app market - produce a Windows Phone that is more akin to a Playstation Vita and is able to run games that can also run on Xbox One and Windows 10. These wouldn’t be massively powerful games but would fit in with the “write once, run everywhere” better than apps do (typically games are used to having to scale at different resolutions and have custom UIs whereas regular apps tend to be designed to the UI of the platform making “write once, run everywhere” unfeasible).</p>
</blockquote>

		</div>
	</article>
    
	<article>
		<header>
     		
				<h1><a href="/weblog/2015/07/31/lego-scooby-doo/">LEGO Scooby-Doo</a></h1>
			
			<time datetime="2015-07-31" pubdate=""><a href="/weblog/2015/07/31/lego-scooby-doo/">July 31, 2015</a></time>
    	</header>
    	<div>
			<p>I’m a huge fan of the Hanna-Barbera cartoons but Scooby-Doo has always been my favourite so I’ve been looking forward to the <a href="http://www.lego.com/en-gb/scoobydoo">LEGO Scooby-Doo sets</a> which officially launch tomorrow. Luckily, due to an error on the part of Argos<sup id="fnref:argos"><a href="#fn:argos" class="footnote">1</a></sup>, I was able to get all five sets a week early so I’ve put together a very brief review. Make sure you scroll to the bottom to see the coolest feature which appears in every set!</p>

<h3 id="mummy-museum-mystery">Mummy Museum Mystery</h3>
<p><img src="https://bendodson.s3.amazonaws.com/weblog/2015/mummy-mystery.jpg" width="600" height="600" />
This is the cheapest of the sets but it has a lot of detail for such a small set. Scooby and Shaggy come in every set but are joined by a mummy complete with headpiece. The museum itself has a hidden compartment with jewels and a liftable sarcophagus in which to hide the mummy.</p>

<h3 id="mystery-plane-adventures">Mystery Plane Adventures</h3>
<p><img src="https://bendodson.s3.amazonaws.com/weblog/2015/mystery-plane.jpg" width="600" height="600" />
This is my least favourite set but you do get a fair amount for the low price. Scooby, Shaggy, and a headless horseman complete with a bi-plane with revolving propellor and (for some reason) burger bombs<sup id="fnref:sandwiches"><a href="#fn:sandwiches" class="footnote">2</a></sup> that you can detach. The Scooby model in this one is slightly different to the others in that he is wearing flying goggles.</p>

<h3 id="the-mystery-machine">The Mystery Machine</h3>
<p><img src="https://bendodson.s3.amazonaws.com/weblog/2015/mystery-machine.jpg" width="600" height="600" />
Now we’re getting to the good stuff. The Mystery Machine is iconic and I’ve no doubt that, at the low price, this will be the most purchased set in this series. For under £30, you get Scooby, Shaggy, Fred, a zombie, a scary tree, and the Mystery Machine itself. The model is much smaller than I’d originally anticipated but it is very detailed and opens up allowing access to the inside which contains a kitchen and some props like a camera and torch. Overall, this is a fantastic set although it does use a huge amount of stickers which are prominently visible.</p>

<h3 id="haunted-lighthouse">Haunted Lighthouse</h3>
<p><img src="https://bendodson.s3.amazonaws.com/weblog/2015/haunted-lighthouse.jpg" width="600" height="600" />
This may be my favourite set as it captures everything great about Scooby-Doo. You get a lighthouse keeper (it must have been him), swamp creature, Scooby, Shaggy, Daphne, a speedboat (with skis), and an awesome rock formation with lighthouse and secret pirate cave. There are nice little touches such as scratches inside the prison cell to show that somebody had been counting days, a wonky “keep out” sign, and a face on the hidden cave complete with gold tooth.</p>

<h3 id="mystery-mansion">Mystery Mansion</h3>
<p><img src="https://bendodson.s3.amazonaws.com/weblog/2015/mystery-mansion.jpg" width="600" height="600" />
The biggest and most expensive of the sets, the Mystery Mansion shares a lot in common with the retired “<a href="http://lego.wikia.com/wiki/Monster_Fighters">Monster Fighters</a>” sets that LEGO released in 2012 (of which I have the <a href="http://shop.lego.com/en-GB/Haunted-House-10228">Haunted House</a>, my all time favourite LEGO set). The mansion is broken into 3 core areas; a greenhouse (with man eating plant), kitchen, and the tower. I personally think the greenhouse is the most interesting as there is good use of transparent panes and wedges to give the impression of smashed glass. The tower also has a nice feature in that when you turn a knob at the back, the clock hand advances and a column in the middle rotates to switch from a bat to a place where you can stand the vampire minifigure. There are a lot of stickers although the majority are on transparent panes which I find transfer better than on bricks where a slight misplacement can look terrible. In terms of minifigures, you get Scooby, Shaggy, Daphne, Velma<sup id="fnref:velma"><a href="#fn:velma" class="footnote">3</a></sup>, a suit of armour, a ghost, and a vampire. Both the vampire and ghost glow in the dark if you shine light on them first. Overall, this is a great set for both adult collectors and for kids to play with.</p>

<h3 id="minifigures">Minifigures</h3>
<p><img src="https://bendodson.s3.amazonaws.com/weblog/2015/scooby-gang.jpg" width="600" height="600" />
The main draw for most adult collectors will be the minifigures. Whilst Scooby<sup id="fnref:scooby"><a href="#fn:scooby" class="footnote">4</a></sup> and Shaggy come in every set, Daphne appears in two, and Fred and Velma only appear in one each so you’ll need practically every set if you want all 5 of them. In terms of the figures themselves, the designs are perfect and I believe this is the first time that LEGO have done custom arms on licensed models (note how Shaggy’s arms show a t-shirt style rather than extending to the hand). However, the best thing of all in these sets are the villains…</p>

<p><img src="https://bendodson.s3.amazonaws.com/weblog/2015/scooby-villains-1.jpg" width="600" height="600" /><img src="https://bendodson.s3.amazonaws.com/weblog/2015/scooby-villains-2.jpg" width="600" height="600" />
Every villain<sup id="fnref:almost"><a href="#fn:almost" class="footnote">5</a></sup> has a double-printed head so you can unmask them and mimic the whole “I would have gotten away with it too if it weren’t for you meddling kids” speech! This for me shows how much thought LEGO have put into these sets and makes every minifigure one worth having (whereas on face value<sup id="fnref:ha"><a href="#fn:ha" class="footnote">6</a></sup> they seem a little bland being mainly reprints from other sets).</p>

<p>Overall I highly recommend the Scooby-Doo LEGO sets. They offer great value for money, especially for licensed sets, and will look good as display models for adult collectors whilst also being high in playability for kids. Don’t forget that the <a href="https://ideas.lego.com/blogs/1-blog/post/33">LEGO Big Bang Theory set</a> also launches tomorrow though!</p>

<div class="footnotes">
  <ol>
    <li id="fn:argos">
      <p>They accidentally broke the embargoe and were selling them instore - I managed to rush to my local branch and get all 5 sets about an hour before the mistake was fixed and they were pulled. <a href="#fnref:argos" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:sandwiches">
      <p>Every set has Scooby and Shaggy but they also always have either a sandwich or a burger. On the cheaper sets they’re a bit oddly placed (i.e. in the Mummy Museum they are used as the lever for the sarcophagus) but they are quite nice as mini models. <a href="#fnref:sandwiches" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:velma">
      <p>“<a href="https://www.youtube.com/watch?v=mugwhe_nGL0&amp;t=2m3s">Nice read, Velma</a>” <a href="#fnref:velma" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:scooby">
      <p>It’s worth noting that there are <a href="https://bendodson.s3.amazonaws.com/weblog/2015/scooby-gang.jpg">4 Scooby variants</a>; one paw up, one paw up and scared, sat down and scared, and sat down with flying goggles. <a href="#fnref:scooby" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:almost">
      <p>OK, almost every villain. The zombie doesn’t have anything to cover the back so instead they have put a crease and some buttons to show it’s a mask. Genius. <a href="#fnref:almost" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:ha">
      <p><em>*chortle*</em> <a href="#fnref:ha" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
  </ol>
</div>

		</div>
	</article>
    
	<article>
		<header>
     		
				<h1><a href="/weblog/2015/07/28/the-mobile-web/">The mobile web</a></h1>
			
			<time datetime="2015-07-28" pubdate=""><a href="/weblog/2015/07/28/the-mobile-web/">July 28, 2015</a></time>
    	</header>
    	<div>
			<p>There has been a huge amount of talk over the past couple of weeks about mobile browsers mainly due to two announcements at WWDC; <a href="https://www.webkit.org/blog/3476/content-blockers-first-look/">Content Blockers in Safari</a> and <a href="https://www.apple.com/news/">Apple News</a>. This has led to discussion of mobile ads as it has been discovered there are huge speed boosts to be made when certain elements are blocked (for example, the <a href="http://murphyapps.co/blog/2015/6/24/an-hour-with-safari-content-blocker-in-ios-9">iMore site weighs 14MB</a> for something that is essentially plaintext). The thing that got me was when Niley Patel of The Verge created an article called “<a href="http://www.theverge.com/2015/7/20/9002721/the-mobile-web-sucks">The mobile web sucks</a>” whilst failing to notice the irony that the article he created <a href="http://blog.lmorchard.com/2015/07/22/the-verge-web-sucks/">takes 30s to load, and fetches 9.5MB across 263 HTTP requests</a>. The bit that irritated me though was this passage:</p>

<blockquote>
  <p>Similarly, Apple News lets you publish directly onto iPhones, bypassing Apple’s own Safari browser, which feels mildly crazy. Yet there’s some excitement over this: I just read Ben Thompson’s excellent piece explaining how the ad market for smaller publishers leads inexorably to bloated web pages that load poorly. That piece was itself a response to John Gruber saying that Apple’s new Safari Content Blocker system would cause a “reckoning” for publishers by letting users block performance-degrading Javascript. And yes, most commercial web pages are overstuffed with extremely complex ad tech, but it’s a two-sided argument: we should expect browser vendors to look at the state of the web and push their browsers to perform better, just as we should expect web developers to look at browser performance and trim the fat. But right now, the conversation appears to be going in just one direction.</p>
</blockquote>

<blockquote>
  <p>And that’s troubling. Taken together, Apple News and Facebook Instant Articles are the saddest refutation of the open web revolution possible: they are incompatible proprietary publishing systems entirely under the control of huge corporations, neither of which particularly understands publishing or media. Earlier this year, I called Facebook the new AOL; Instant Articles comes from the same instinct as AOL trying to bring Time Warner’s media content into its app just before the web totally kicked its ass. Apple and Facebook are turning their back on the web to build replacements for the web, and with them replacements for HTML and CSS and every bit of web innovation it’s taken 20 years of competitive development to achieve.</p>
</blockquote>

<p>I’m not 100% sure on Facebook Instant Articles but Apple News is basically just an RSS reader. Sure you can use some <a href="https://developer.apple.com/library/prerelease/ios/documentation/General/Conceptual/News_Publishing_Guide/RSSBestPractices.html#//apple_ref/doc/uid/TP40015407-CH13-SW1">custom syntax to make things look slightly nicer</a> but they have “over a million topics” because they’ve basically scraped all the big RSS feeds and packaged it nicely. This brings me to the one thing I probably agree with Niley on<sup id="fnref:bracelet"><a href="#fn:bracelet" class="footnote">1</a></sup>, the mobile web does suck. The difference is that I don’t ever use it…</p>

<p>On mobile, apps have completely replaced the web for me. Safari isn’t on my first home screen, let alone my dock; it’s buried in a folder with Stocks, Tips, and other undeletable<sup id="fnref:undeletable"><a href="#fn:undeletable" class="footnote">2</a></sup> Apple apps. The majority of browsing I do on my phone is either my RSS feeds or Twitter; if I want to read a link, they usually open in their own browser and I usually regret it. Mobile web sites are generally horrible things that are slow to load and have ridiculous interfaces. There are some sites that take longer to load on 4G than the equivelant WAP<sup id="fnref:wap"><a href="#fn:wap" class="footnote">3</a></sup> website used to on GPRS! Even the option to choose to render the desktop version often doesn’t work due to the horrible way in which most companies detect you are using a mobile browser. Due to this, I typically save websites I want to read to my Pinboard and read them later on my iMac or use the “readability” feature in Safari.</p>

<p>I love RSS feeds. I subscribe to around 130 websites<sup id="fnref:subscribe"><a href="#fn:subscribe" class="footnote">4</a></sup> and I get every article fast, cached for offline usage, rendered in the same font, and without any JavaScript crap. I simply don’t understand people that don’t use RSS. Twitter is no match; you have to scroll through a ton of stuff you aren’t interested in to find links which you then have to click and wait for your browser to render. RSS keeps everything uniform and consistent and ensures I don’t miss anything. That is essentially what Apple News is trying to do (albeit with a discovery angle and a bit more design) and it seems like a perfectly good idea to me but I doubt it’ll make me switch from <a href="http://reederapp.com">Reeder</a> and <a href="http://feedbin.com/">FeedBin</a>, my current setup.</p>

<p>The only minor problem I have with RSS is sites (<s>like The Verge</s><sup id="fnref:theverge"><a href="#fn:theverge" class="footnote">5</a></sup>) who only give you a paragraph of the text before making you click through to the site so they get your eyeballs on their ads and which always leads to clickbait headlines and paragraphs ending in a manufactured cliffhanger<sup id="fnref:remove"><a href="#fn:remove" class="footnote">6</a></sup>. Fortunately there aren’t many sites that do that but Apple News is not going to fix it; they have provision for this with a “<a href="https://developer.apple.com/library/prerelease/ios/documentation/General/Conceptual/News_Publishing_Guide/RSSBestPractices.html#//apple_ref/doc/uid/TP40015407-CH13-SW1">Read Full Story” link</a> they embed that opens up the rest of the page within an internal browser. There are also sites which have ads as content (i.e. Daring Fireball) but those work well as they can be skimmed over quickly if they are of no interest and they don’t track you, take over your screen, or do any of the other things that browser ads do.</p>

<p>So whilst everybody is up in arms about mobile browsers using up their battery and CPU, tracking their usage across the web, and having the unwinnable argument over whether to block ads or not<sup id="fnref:blockads"><a href="#fn:blockads" class="footnote">7</a></sup>, I’ll be sat reading that debate in my JavaScript-free, fast, RSS reader. I’ll likely end up installing some form of content blocker when iOS 9 is released for the few times that I do end up using the browser, but those times are thankfully becoming fewer and fewer on mobile.</p>

<div class="footnotes">
  <ol>
    <li id="fn:bracelet">
      <p>I have an instant dislike to him after his <a href="http://www.theverge.com/a/apple-watch-review">Apple Watch review</a> (which has a horrible, horrible website) in which he said the notifications made him ruder in conversation (as he constantly looked at his watch rather than ignoring it - that just makes him a jerk, not the watch) and claimed he felt “ridiculous wearing the Milanese Loop” yet is happy to wear a <a href="http://www.neogaf.com/forum/showthread.php?t=1031596">massive chunky punk bracelet</a>. <a href="#fnref:bracelet" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:undeletable">
      <p>I’m still surprised this hasn’t been remedied. In iOS 3 you could enable the Nike Running app by a toggle in settings (as the 3GS had the Bluetooth chip to talk to the shoe tracker) so I don’t see an issue why the built-in apps couldn’t be turned off in a similar way from settings. <a href="#fnref:undeletable" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:wap">
      <p>Who remembers WAP? Fun times. <a href="#fnref:wap" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:subscribe">
      <p>A mixture of tech, politics, development, LEGO, video game, and Disney blogs. Everything published in the areas I care about all in one place. <a href="#fnref:subscribe" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:theverge">
      <p>Turns out that The Verge does offer a <a href="http://www.theverge.com/rss/full.xml">full RSS feed</a> after all! A shame that <a href="http://9to5mac.com">9to5mac.com</a> have started truncating theirs… <a href="#fnref:theverge" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:remove">
      <p>After clicking a few of them, you realise the site is terrible and unsubscribe from it. Problem solved. <a href="#fnref:remove" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:blockads">
      <p>The argument is either “if you block ads you are getting something for free and going to put the publisher out of business” or “you shouldn’t be using up my battery and CPU with this privacy invading advertising”. You can’t win either way. I block ads personally but I’ll do a post soon about how I do it on my iMac. <a href="#fnref:blockads" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
  </ol>
</div>

		</div>
	</article>
    
	<article>
		<header>
     		
				<h1><a href="/weblog/2015/07/24/next-driving-test-with-goutte/">Finding the next available driving test with Goutte PHP Scraper</a></h1>
			
			<time datetime="2015-07-24" pubdate=""><a href="/weblog/2015/07/24/next-driving-test-with-goutte/">July 24, 2015</a></time>
    	</header>
    	<div>
			<p>Over the past week I’ve had a lot of fun working on some small scripts to aid my general day-to-day living. My wife is currently waiting to take her driving test but our local area only has one test instructor with a waiting list of over 6 months! Occassionally slots open up due to cancellations and so she has been logging into the <a href="https://driverpracticaltest.direct.gov.uk/login">Government website</a> multiple times a day to check for a nearer date. Time for some automation!</p>

<p>To stop her having to constantly go to a website, I decided to knock up a quick PHP script that would basically pretend to be a browser, log in, go to the correct page, and rip out the next available appointment. It’s been a while since I wrote a script like this so I had a look around for something better than <code>SimpleXML</code> and found <a href="https://github.com/FriendsOfPHP/Goutte">Goutte, a simple PHP Web Scraper</a>. Within 10 minutes, my script was working. It looks something like this:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span></span><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="s1">&#39;vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Goutte\Client</span><span class="p">;</span>

<span class="nv">$licenseNumber</span> <span class="o">=</span> <span class="s1">&#39;xxx&#39;</span><span class="p">;</span> <span class="c1">// Driving License Number</span>
<span class="nv">$referenceNumber</span> <span class="o">=</span> <span class="s1">&#39;xxx&#39;</span><span class="p">;</span> <span class="c1">// Reference number for current test date as looking to rebook</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">();</span>

<span class="nv">$crawler</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;https://driverpracticaltest.direct.gov.uk/login&#39;</span><span class="p">);</span>
<span class="nv">$crawler</span><span class="o">-&gt;</span><span class="na">filter</span><span class="p">(</span><span class="s1">&#39;h2&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">each</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$node</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Sorry, you can’t use this service right now&quot;</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">echo</span> <span class="s1">&#39;Site is down.&#39;</span><span class="p">;</span><span class="k">exit</span><span class="p">;</span> <span class="c1">// Inexplicably, the site goes offline from 9pm-6am. It thinks it&#39;s an office!</span>
	<span class="p">}</span>
<span class="p">});</span>

<span class="nv">$form</span> <span class="o">=</span> <span class="nv">$crawler</span><span class="o">-&gt;</span><span class="na">selectButton</span><span class="p">(</span><span class="s1">&#39;Continue&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">form</span><span class="p">();</span>
<span class="nv">$crawler</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">submit</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="nv">$licenseNumber</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="nv">$referenceNumber</span><span class="p">));</span>
<span class="nv">$link</span> <span class="o">=</span> <span class="nv">$crawler</span><span class="o">-&gt;</span><span class="na">selectLink</span><span class="p">(</span><span class="s1">&#39;Change Date and time of test&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">();</span>
<span class="nv">$crawler</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">click</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>
<span class="nv">$form</span> <span class="o">=</span> <span class="nv">$crawler</span><span class="o">-&gt;</span><span class="na">selectButton</span><span class="p">(</span><span class="s1">&#39;Find available dates&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">form</span><span class="p">();</span>
<span class="nv">$crawler</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">submit</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;testChoice&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ASAP&#39;</span><span class="p">));</span>

<span class="nv">$crawler</span><span class="o">-&gt;</span><span class="na">filter</span><span class="p">(</span><span class="s1">&#39;.slotDateTime&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">each</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$node</span><span class="p">)</span> <span class="p">{</span>
	<span class="nv">$date</span> <span class="o">=</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">();</span>
	<span class="k">echo</span> <span class="nv">$date</span><span class="o">.</span><span class="s1">&#39; is the next available test slot.&#39;</span><span class="p">;</span>
	<span class="c1">// Here I check if it has changed since last time and send an email if it has and nearer than currently booked test. Left out for brevity.</span>
    <span class="k">exit</span><span class="p">;</span>
<span class="p">});</span>

<span class="cp">?&gt;</span><span class="x"></span></code></pre></figure>

<p>As you can see, the code is pretty simple, readable, and powerful. Within minutes, I was able to jump through 3 pages without worrying about sessions, cookies, or any of the other nonsense that often occurred when dealing with this kind of scraping. I run this every 5 minutes on a <a href="http://fortrabbit.com/">FortRabbit server</a> and we both get emailed if a closer test date appears. For just a few minutes work, this means better peace of mind as we don’t have to check manually and this checks far more frequently than we ever could. Now to wait and hope for a nearer test date…</p>

		</div>
	</article>
    
	<article>
		<header>
     		
				<h1><a href="/weblog/2015/07/17/transferwise/">TransferWise</a></h1>
			
			<time datetime="2015-07-17" pubdate=""><a href="/weblog/2015/07/17/transferwise/">July 17, 2015</a></time>
    	</header>
    	<div>
			<p>I’ve been meaning to write about <a href="https://transferwise.com/u/135bb">TransferWise</a> for a little while but there new support for Apple Pay put it back in the front of my mind. TransferWise is a service that transfers money for you into multiple currencies at a fraction of the cost that your bank would usually charge. I’d seen it advertised a few times on Facebook but didn’t take too much notice as I didn’t really make any international transfers; that stopped when we <a href="http://wallabeegame.com/blog/apr-2014/design-team-update">hired Robbie at WallaBee last year</a>. I quickly found that my bank was not only charging me with exhorbitant conversion rates and transfer charges but that the recipient was also being charged by their bank for accepting an international transfer!</p>

<p>The way TransferWise works is that it lets you choose a specific amount of money to transfer (either in the original or converted currency<sup id="fnref:transfers"><a href="#fn:transfers" class="footnote">1</a></sup>) and then it tells you how much it thinks it will cost. You then pay that amount (plus a small buffer to account for fluctuating bank transfers) direct to TransferWise by card or bank transfer. They then do the conversion and pay the recipient from a local account in their own currency so they don’t get hit with international charges. Once it is all done, you get a refund for any of the amount that wasn’t used for the conversion. The first few times the transfer took around 5 working days but now my transfers are done within 24 hours.</p>

<p>I’ve saved over £500 in fees over the past 6 months and couldn’t be happier with the service. I tend to use the website but they have a great iOS app which has recently been updated to accept Apple Pay. If you are making any sort of payments overseas, I’d strongly recommend using TransferWise rather than your standard banking transfers. If you <a href="https://transferwise.com/u/135bb">sign up with this link</a>, you’ll get a fee-free transfer of up to £3000.</p>

<div class="footnotes">
  <ol>
    <li id="fn:transfers">
      <p>This is an important distinction as when paying an invoice I need to pay in a specific amount of USD so the amount of GBP will change. There may be situations where you always want send a specific amount of GBP and the USD will then be the thing that varies based on currency conversion. Obviously they support more than just USD / GBP but that’s all I use currently. <a href="#fnref:transfers" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
  </ol>
</div>

		</div>
	</article>
    
	
</section>


<section id="pagination">
     
    	<a href="/weblog/page/12/" title="Previous Page" class="pagination-previous">&laquo; Older Entries</a>
     
	
    
      
      	<a href="/weblog/page/10/" title="Next Page" class="pagination-next">Newer Entries &raquo; </a>
      
    
</section>

		
		<footer>
			<p>I perform all freelance work through my company <strong>Dodo Apps Ltd</strong> (07856552) registered at The Bristol Office, 2nd Floor, 5 High Street, Westbury on Trym, Bristol, England, BS9 3BY</p>
		</footer>

	</div>


</body>
</html>